<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gringotts Wizarding Bank | Hogwarts Ori√≥n</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Special+Elite&display=swap');

        :root {
            --gold: #d4af37; --gold-dark: #8b6d45; --bg: #050505;
            --sly: #2e7d32; --gry: #c62828; --rav: #1565c0; --huf: #fbc02d;
        }

        body {
            margin: 0; background: var(--bg); color: #e0e0e0;
            font-family: 'Special Elite', serif; display: flex; flex-direction: column; align-items: center; padding: 10px;
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #050505 100%);
        }

        .main-app { width: 100%; max-width: 500px; background: rgba(18, 18, 20, 0.95); border: 1px solid var(--gold); border-radius: 15px; padding: 15px; box-shadow: 0 0 50px rgba(0,0,0,0.9); backdrop-filter: blur(10px); }
        
        h1 { font-family: 'Cinzel'; color: var(--gold); text-align: center; margin: 10px 0; letter-spacing: 4px; font-weight: 900; }
        .subtitle { text-align: center; font-size: 9px; color: var(--gold-dark); margin-bottom: 20px; letter-spacing: 2px; }

        /* VISTA DE B√ìVEDA */
        .vault-card { background: linear-gradient(135deg, #000 0%, #1a1a1c 100%); padding: 25px; border-radius: 12px; border: 1px solid #333; margin-bottom: 15px; text-align: center; position: relative; overflow: hidden; }
        .vault-card::after { content: "GRINGOTTS"; position: absolute; bottom: -10px; right: -10px; font-family: 'Cinzel'; font-size: 40px; color: rgba(212, 175, 55, 0.03); transform: rotate(-15deg); }
        
        .user-name { font-size: 20px; color: #fff; font-family: 'Cinzel'; margin-bottom: 5px; }
        .balance-box { font-size: 34px; color: var(--gold); font-weight: bold; text-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }

        /* NAVEGACI√ìN */
        .nav-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-bottom: 15px; }
        .tab-btn { background: #111; border: 1px solid #444; color: #777; padding: 12px 2px; font-family: 'Cinzel'; font-size: 9px; cursor: pointer; border-radius: 4px; transition: 0.3s; }
        .tab-btn.active { border-color: var(--gold); color: var(--gold); background: rgba(212, 175, 55, 0.1); box-shadow: inset 0 0 10px rgba(212, 175, 55, 0.1); }

        /* LISTADOS */
        .list-area { max-height: 400px; overflow-y: auto; padding-right: 5px; scrollbar-width: thin; }
        .item-card { background: rgba(255,255,255,0.03); border: 1px solid #222; padding: 12px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .item-info b { display: block; color: var(--gold); font-size: 13px; font-family: 'Cinzel'; }
        .item-info span { font-size: 10px; color: #999; }
        .qty-badge { background: var(--gold); color: #000; padding: 3px 10px; border-radius: 5px; font-weight: bold; font-size: 12px; box-shadow: 0 0 10px rgba(212, 175, 55, 0.3); }

        input { width: 100%; padding: 14px; background: #000; border: 1px solid #333; color: var(--gold); border-radius: 8px; margin-bottom: 12px; text-align: center; font-family: 'Cinzel'; font-size: 14px; }
        .btn-gold { background: var(--gold); color: #000; border: none; padding: 12px; width: 100%; font-family: 'Cinzel'; font-weight: bold; cursor: pointer; border-radius: 6px; }
        
        .cat-title { color: var(--gold-dark); font-size: 11px; margin: 15px 0 10px; border-bottom: 1px solid #222; padding-bottom: 5px; display: block; letter-spacing: 2px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="main-app">
        <h1>GRINGOTTS</h1>
        <div class="subtitle">Official Banking System - Hogwarts Ori√≥n</div>

        <div id="login-zone">
            <input type="text" id="user-search" placeholder="Nombre del Mago / Bruja">
            <button class="btn-gold" onclick="login()">ABRIR MI B√ìVEDA</button>
            <p style="font-size: 10px; color: #555; text-align: center; margin-top: 15px; line-height: 1.5;">Ingresa tu nombre exactamente como figura en el pergamino de Gringotts.</p>
        </div>

        <div id="app-zone" class="hidden">
            <div class="vault-card">
                <div class="user-name" id="user-display">MAGO</div>
                <div class="balance-box"><span id="user-gold">0</span> <span style="font-size:14px">G</span></div>
            </div>

            <div class="nav-grid">
                <button class="tab-btn active" onclick="showTab('tienda')">TIENDA</button>
                <button class="tab-btn" onclick="showTab('baul')">BA√öL</button>
                <button class="tab-btn" onclick="showTab('rank')">TOP</button>
                <button class="tab-btn" onclick="showTab('adm')">‚öôÔ∏è</button>
            </div>

            <div id="tab-tienda" class="tab-content">
                <div class="list-area" id="store-list"></div>
            </div>

            <div id="tab-baul" class="tab-content hidden">
                <div class="list-area" id="baul-list"></div>
            </div>

            <div id="tab-rank" class="tab-content hidden">
                <div class="list-area" id="rank-list"></div>
            </div>

            <div id="tab-adm" class="tab-content hidden">
                <input type="password" id="adm-key" placeholder="Palabra Maestra">
                <input type="text" id="adm-target" placeholder="Nombre Destinatario">
                <input type="number" id="adm-val" placeholder="Cantidad Galeones (+/-)">
                <button class="btn-gold" style="background:#fff" onclick="adminMod()">MODIFICAR B√ìVEDA</button>
            </div>

            <p onclick="location.reload()" style="text-align:center; font-size:10px; color:#444; cursor:pointer; margin-top:20px; font-family:'Cinzel'">Cerrar Sesi√≥n</p>
        </div>
    </div>

<script>
    const DB_URL = "https://hogwarts-orion-default-rtdb.firebaseio.com/gringotts";
    let sesion = null;

    // --- BASE DE DATOS MAESTRA DE USUARIOS (EXTRACTO COMPLETO) ---
    const DATA_GRINGOTTS = {
        "VALEN M.": 1850248, "MONTSE CALDER√ìN": 28400, "ARMY": 30900, "CHINNI": 3000, "FRAN OLIVARES": 2503532, 
        "ESTELA MALFOY": 1931900, "BREN": 105500, "LULU": 552290, "YOPI DE AR√ÅNDANO": 1800, "MARTINA": 5642800,
        "LUISURREA": 12443039, "VICTOR SMIRNOV": 418570, "ALII": 121543237, "BETSI": 82831328, "VAL": 120200,
        "CAM": 459450, "GRETEL": 1424660, "ANTONIOMANUEL": 649090, "BUNNY": 15530222, "BELU": 30373514,
        "NANCY": 18239795, "AIX NAJLE": 9314350, "SOFIA": 8768712, "LAURA MAGGI": 6294404, "NINA": 8403542,
        "WENDY": 6741978, "ANGE": 33253387, "MAR": 3941970, "MALENA NOTT": 444665, "GABO": 3681553,
        "LESLIE": 3958666, "ANDRA": 8269726, "DARI": 13576740, "MELINA SLY": 25504328, "JERE": 67137180, "NICK": 2218114
    };

    // --- BASE DE DATOS DE INVENTARIOS ---
    const INV_INICIAL = {
        "FERNANDO SLY": {"ü©µüç´":65, "üñ§üç´":27, "üí°":25, "üíõüç´":17, "üíÄü™Ñ":34, "üíä":25, "üíòüß™":19, "üç≠":8, "üîÆ":18, "ü´ò":51},
        "BELU": {"ü©∑üç´":5, "üíÄü™Ñ":6, "üß°üç´":36, "üíúüç´":21, "üíå":1, "üíöüç´":2, "üß™üíò":1, "üî•üßπ":1},
        "CRIS DELACOUR": {"üíÄü™Ñ":17, "üß°üç´":18, "üíúüç´":35, "üíå":36, "ü©µüç´":96, "üíä":25, "üíç":33, "ü™û":96, "üé±":93, "üß™üíò":24},
        "WENDY": {"üíÄü™Ñ":22, "üß°üç´":7, "üíúüç´":8, "üíå":13, "ü©µüç´":22, "ü™û":10, "üé±":10, "üß™üíò":5},
        "ALII": {"ü©∑üç´":91, "üíÄü™Ñ":90, "üß°üç´":26, "üíúüç´":30, "üíå":36, "ü©µüç´":87, "üíç":36, "üí°":36, "ü´ò":52},
        "MELINA SLY": {"üíöüç´":30, "‚ù§Ô∏èüç´":28, "üñ§üç´":28, "üíõüç´":32, "ü©µüç´":55, "üíå":31, "üíç":27, "ü´ò":169},
        "LUISURREA": {"üíöüç´":31, "‚ù§Ô∏èüç´":27, "ü™ÑüíÄ":37, "ü´ò":168, "ü©∑üç´":36, "üóùÔ∏èü™Ω":8, "üíä":16},
        "NICK": {"üß°üç´":22, "ü©µüç´":27, "üñ§üç´":23, "üîÆ":21, "üíòüß™":13, "üíç":16, "ü™∂":12, "üóùÔ∏èü™Ω":10},
        "ANDRA": {"üîÆ":13, "üß°üç´":9, "ü©µüç´":22, "ü™∂":11, "üíúüç´":15, "ü´ò":16},
        "ANGEL ROSIER": {"ü´ò":24, "üîÆ":20, "ü™û":34, "üé±":34, "ü™∂":25, "ü™ÑüíÄ":40, "üíç":28}
    };

    // --- PRODUCTOS DE LA TIENDA ---
    const STORE_ITEMS = [
        {c: "CALDERO CHORREANTE", i: [
            {n:"Saeta de Fuego üî•üßπ", p:3800, e:"üî•üßπ"}, {n:"Nimbus 2000 ü™Ωüßπ", p:2500, e:"ü™Ωüßπ"},
            {n:"Varita de Sauco ü™ÑüíÄ", p:3800, e:"ü™ÑüíÄ"}, {n:"El giratiempo ‚è±Ô∏è", p:4400, e:"‚è±Ô∏è"},
            {n:"Felix felicis üß™üçÄ", p:4400, e:"üß™üçÄ"}, {n:"Amortentia üß™üíò", p:8800, e:"üß™üíò"}
        ]},
        {c: "RANAS DE CHOCOLATE", i: [
            {n:"Ranita Amarilla üíõüç´", p:1000, e:"üíõüç´"}, {n:"Ranita Verde üíöüç´", p:5000, e:"üíöüç´"},
            {n:"Ranita Celeste ü©µüç´", p:450, e:"ü©µüç´"}, {n:"Ranita Rosa ü©∑üç´", p:1000, e:"ü©∑üç´"}
        ]}
    ];

    async function login() {
        const input = document.getElementById('user-search').value.toUpperCase();
        const name = input.replace(/[@~‚Å®‚Å©|*]/g, "").trim();
        if(!name) return;

        let r = await fetch(`${DB_URL}/${name}.json`);
        let d = await r.json();

        if(!d) {
            d = { 
                nombre: name, 
                oro: DATA_GRINGOTTS[name] || 2000, 
                inventario: INV_INICIAL[name] || {} 
            };
            await fetch(`${DB_URL}/${name}.json`, { method: 'PUT', body: JSON.stringify(d) });
        }
        sesion = d;
        localStorage.setItem('wizard_name', name);
        initVault();
    }

    function initVault() {
        document.getElementById('login-zone').classList.add('hidden');
        document.getElementById('app-zone').classList.remove('hidden');
        document.getElementById('user-display').innerText = sesion.nombre;
        document.getElementById('user-gold').innerText = sesion.oro.toLocaleString();
        
        renderTienda();
        renderBaul();
        renderRank();
    }

    function renderTienda() {
        let h = "";
        STORE_ITEMS.forEach(cat => {
            h += `<span class="cat-title">${cat.c}</span>`;
            cat.i.forEach(item => {
                h += `<div class="item-card">
                    <div class="item-info"><b>${item.n}</b><span>Precio: ${item.p}G</span></div>
                    <button class="btn-gold" style="width:80px; font-size:10px" onclick="buy('${item.e}', ${item.p})">COMPRAR</button>
                </div>`;
            });
        });
        document.getElementById('store-list').innerHTML = h;
    }

    function renderBaul() {
        const inv = sesion.inventario || {};
        const entries = Object.entries(inv);
        document.getElementById('baul-list').innerHTML = entries.length ? 
            entries.map(([e, q]) => `<div class="item-card"><div class="item-info"><b>${e} Objeto M√°gico</b></div><div class="qty-badge">${q}</div></div>`).join('') :
            "<p style='text-align:center; color:#444'>B√≥veda vac√≠a.</p>";
    }

    async function buy(e, p) {
        if(sesion.oro < p) return alert("Insuficientes Galeones en la B√≥veda.");
        sesion.oro -= p;
        sesion.inventario[e] = (sesion.inventario[e] || 0) + 1;
        await fetch(`${DB_URL}/${sesion.nombre}.json`, { method: 'PATCH', body: JSON.stringify(sesion) });
        initVault();
    }

    async function renderRank() {
        const r = await fetch(`${DB_URL}.json`);
        const d = await r.json();
        const top = Object.values(d).sort((a,b) => b.oro - a.oro).slice(0,10);
        document.getElementById('rank-list').innerHTML = top.map((u, i) => `
            <div class="item-card"><span><b>${i+1}.</b> ${u.nombre}</span><span style="color:var(--gold)">${u.oro.toLocaleString()}G</span></div>
        `).join('');
    }

    function showTab(t) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-'+t).classList.remove('hidden');
        event.currentTarget.classList.add('active');
    }

    async function adminMod() {
        if(document.getElementById('adm-key').value !== "Orion2026") return alert("Clave Incorrecta");
        const target = document.getElementById('adm-target').value.toUpperCase();
        const val = parseInt(document.getElementById('adm-val').value);
        const r = await fetch(`${DB_URL}/${target}.json`);
        const d = await r.json();
        if(d) {
            await fetch(`${DB_URL}/${target}.json`, { method: 'PATCH', body: JSON.stringify({oro: (d.oro || 0) + val}) });
            alert("B√≥veda Modificada.");
        }
    }

    window.onload = () => {
        const s = localStorage.getItem('wizard_name');
        if(s) { document.getElementById('user-search').value = s; login(); }
    }
</script>
</body>
</html>
